<app-header></app-header>
<div class="fine-check-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="breadcrumb">
      <a routerLink="/">Trang ch·ªß</a>
      <span class="separator">‚Ä∫</span>
      <span>Tra c·ª©u ph·∫°t ngu·ªôi</span>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <div class="check-card">
      <h1 class="title">Tra c·ª©u ph·∫°t ngu·ªôi</h1>

      <!-- Tab Navigation -->
      <div class="tab-navigation">
        <button 
          class="tab-btn" 
          [class.active]="activeTab === 'csgt'"
          (click)="onTabChange('csgt')">
          Tra c·ª©u t·ª´ C·ª•c CSGT
        </button>
        <button 
          class="tab-btn" 
          [class.active]="activeTab === 'registry'"
          (click)="onTabChange('registry')">
          Tra c·ª©u t·ª´ C·ª•c ƒêƒÉng ki·ªÉm
        </button>
      </div>

      <!-- Vehicle Type Selection -->
      <div class="vehicle-type">
        <label class="radio-label">
          <input 
            type="radio" 
            name="vehicleType" 
            value="car" 
            [(ngModel)]="vehicleType">
          <span>√î t√¥</span>
        </label>
        <label class="radio-label">
          <input 
            type="radio" 
            name="vehicleType" 
            value="motorcycle" 
            [(ngModel)]="vehicleType">
          <span>Xe m√°y</span>
        </label>
        <label class="radio-label">
          <input 
            type="radio" 
            name="vehicleType" 
            value="electric" 
            [(ngModel)]="vehicleType">
          <span>Xe m√°y ƒëi·ªán</span>
        </label>
      </div>

      <!-- Plate Color Selection -->
      <div class="plate-color">
        <label class="color-label">M√†u bi·ªÉn:</label>
        <div class="color-options">
          <label class="radio-label">
            <input type="radio" name="plateColor" value="white" [(ngModel)]="plateColor">
            <span>Tr·∫Øng</span>
          </label>
          <label class="radio-label">
            <input type="radio" name="plateColor" value="yellow" [(ngModel)]="plateColor">
            <span>V√†ng</span>
          </label>
          <label class="radio-label">
            <input type="radio" name="plateColor" value="blue" [(ngModel)]="plateColor">
            <span>Xanh</span>
          </label>
        </div>
      </div>

      <!-- Search Input -->
      <div class="search-section">
        <div class="input-wrapper">
          <input 
            type="text" 
            class="search-input" 
            placeholder="Nh·∫≠p bi·ªÉn s·ªë xe (VD: 30A12345)"
            [(ngModel)]="licensePlate"
            (keyup.enter)="searchFines()"
            [disabled]="isLoading">
          
          <!-- Tem ƒëƒÉng ki·ªÉm cho tab ƒêƒÉng ki·ªÉm -->
          <input 
            *ngIf="activeTab === 'registry'"
            type="text" 
            class="search-input" 
            placeholder="Tem ƒëƒÉng ki·ªÉm (t√πy ch·ªçn)"
            [(ngModel)]="registrationStamp"
            (keyup.enter)="searchFines()"
            [disabled]="isLoading">
        </div>
        
        <button 
          class="search-btn" 
          (click)="searchFines()"
          [disabled]="isLoading">
          <span class="btn-icon" *ngIf="!isLoading">‚Üí</span>
          <span class="btn-text">{{ isLoading ? 'ƒêang tra c·ª©u...' : 'Tra c·ª©u' }}</span>
        </button>
      </div>

      <p class="helper-text">
        T√≠ch h·ª£p d·ªØ li·ªáu: C·ªïng th√¥ng tin ƒëi·ªán t·ª≠ C·ª•c C·∫£nh s√°t giao th√¥ng v√† C·ª•c ƒêƒÉng ki·ªÉm Vi·ªát Nam
      </p>

      <!-- Results Section -->
      <div class="results-section" *ngIf="searchResults && !isLoading">
        <!-- No Fines -->
        <div class="no-fines-result" *ngIf="!searchResults.hasFines">
          <div class="success-icon">
            <div class="checkmark-circle">
              <svg width="60" height="60" viewBox="0 0 60 60">
                <path d="M15 30 L25 40 L45 20" stroke="white" stroke-width="5" fill="none" 
                      stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>
          <div class="result-message">
            <h3 class="status-text">Ch∆∞a ph√°t hi·ªán l·ªói vi ph·∫°m</h3>
            <p class="congratulation">H√£y ki·ªÉm tra th∆∞·ªùng xuy√™n ƒë·ªÉ c·∫≠p nh·∫≠t d·ªØ li·ªáu m·ªõi nh·∫•t!</p>
          </div>
        </div>

        <!-- Has Fines -->
        <div class="has-fines-result" *ngIf="searchResults.hasFines">
          <div class="fines-header">
            <div class="warning-icon">‚ö†Ô∏è</div>
            <h3>Ph√°t hi·ªán {{ searchResults.totalFines }} l·ªói vi ph·∫°m</h3>
            <p class="total-amount">T·ªïng s·ªë ti·ªÅn ph·∫°t: <strong>{{ formatCurrency(searchResults.totalAmount!) }}</strong></p>
          </div>
          
          <div class="fines-list">
            <div class="fine-item" *ngFor="let fine of searchResults.fines; let i = index">
              <div class="fine-header">
                <span class="fine-number">#{{ i + 1 }}</span>
                <span class="fine-status" [class.unpaid]="fine.status === 'Ch∆∞a x·ª≠ l√Ω'">
                  {{ fine.status || 'Ch∆∞a x·ª≠ l√Ω' }}
                </span>
              </div>
              <div class="fine-info">
                <div class="info-row">
                  <span class="label">Ng√†y vi ph·∫°m:</span>
                  <span class="value">{{ fine.date }} {{ fine.time }}</span>
                </div>
                <div class="info-row">
                  <span class="label">ƒê·ªãa ƒëi·ªÉm:</span>
                  <span class="value">{{ fine.location }}</span>
                </div>
                <div class="info-row">
                  <span class="label">H√†nh vi:</span>
                  <span class="value">{{ fine.violation }}</span>
                </div>
                <div class="info-row">
                  <span class="label">M·ª©c ph·∫°t:</span>
                  <span class="value amount">{{ formatCurrency(fine.amount) }}</span>
                </div>
                <div class="info-row" *ngIf="fine.decisionNumber">
                  <span class="label">S·ªë quy·∫øt ƒë·ªãnh:</span>
                  <span class="value">{{ fine.decisionNumber }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Update Info -->
        <div class="update-info">
          <div class="info-item">
            <span class="icon">üïí</span>
            <span>Th·ªùi gian c·∫≠p nh·∫≠t: <strong>{{ searchResults.lastUpdate }}</strong></span>
          </div>
          <div class="info-item">
            <span class="icon">üìã</span>
            <span>Ngu·ªìn tr·∫£ k·∫øt qu·∫£: <strong>{{ searchResults.source }}</strong></span>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
          <button class="btn-primary" (click)="updateData()">
            <span class="btn-icon">üîÑ</span>
            C·∫≠p nh·∫≠t d·ªØ li·ªáu m·ªõi
          </button>
          <button class="btn-secondary" (click)="checkOtherPlate()">
            <span class="btn-icon">üîç</span>
            Ki·ªÉm tra bi·ªÉn s·ªë kh√°c
          </button>
        </div>
      </div>

      <!-- Loading State -->
      <div class="loading" *ngIf="isLoading">
        <div class="spinner"></div>
        <p class="loading-text">ƒêang tra c·ª©u d·ªØ li·ªáu...</p>
        <p class="loading-note">Vui l√≤ng ch·ªù trong gi√¢y l√°t</p>
      </div>

      <!-- Error State -->
      <div class="error-message" *ngIf="errorMessage && !isLoading">
        <div class="error-icon">‚ö†Ô∏è</div>
        <p class="error-text">{{ errorMessage }}</p>
        <button class="btn-retry" (click)="searchFines()">
          <span class="btn-icon">üîÑ</span>
          Th·ª≠ l·∫°i
        </button>
      </div>
    </div>
  </div>

  <!-- Information Section -->
  <div class="info-section">
    <h2>Ti·ªán √≠ch tra c·ª©u ph·∫°t ngu·ªôi</h2>
    
    <div class="info-content">
      <p class="intro-text">
        Carviet.vn cung c·∫•p c√¥ng c·ª• tra c·ª©u ph·∫°t ngu·ªôi tr·ª±c tuy·∫øn, h·ªó tr·ª£ ch·ªß xe v√† ng∆∞·ªùi ƒëi·ªÅu khi·ªÉn 
        ph∆∞∆°ng ti·ªán d·ªÖ d√†ng ki·ªÉm tra t√¨nh tr·∫°ng vi ph·∫°m giao th√¥ng c·ªßa √¥ t√¥, xe m√°y tr√™n to√†n qu·ªëc.
      </p>

      <h3>Tra c·ª©u ph·∫°t ngu·ªôi √¥ t√¥, xe m√°y online to√†n qu·ªëc</h3>
      
      <div class="feature-section">
        <h4>T√≠nh nƒÉng n·ªïi b·∫≠t:</h4>
        <ul>
          <li>Tra c·ª©u nhanh ch√≥ng qua bi·ªÉn s·ªë xe ho·∫∑c th√¥ng tin ƒëƒÉng ki·ªÉm.</li>
          <li>D·ªØ li·ªáu ch√≠nh x√°c t·ª´ C·ªïng th√¥ng tin ƒëi·ªán t·ª≠ C·ª•c C·∫£nh s√°t giao th√¥ng ho·∫∑c c·ª•c ƒëƒÉng ki·ªÉm Vi·ªát Nam.</li>
          <li>Hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß th√¥ng tin vi ph·∫°m: lo·∫°i l·ªói, th·ªùi gian ‚Äì ƒë·ªãa ƒëi·ªÉm, h√¨nh ·∫£nh/video (n·∫øu c√≥), m·ª©c x·ª≠ ph·∫°t v√† c∆° quan x·ª≠ l√Ω.</li>
          <li>Mi·ªÖn ph√≠ s·ª≠ d·ª•ng, kh√¥ng c·∫ßn ƒëƒÉng k√Ω t√†i kho·∫£n.</li>
        </ul>
      </div>

      <div class="feature-section">
        <h4>L·ª£i √≠ch mang l·∫°i:</h4>
        <ul>
          <li>Ch·ªß ƒë·ªông n·∫Øm b·∫Øt vi ph·∫°m, tr√°nh ph·∫£i sinh x·ª≠ l√Ω ch·∫≠m ho·∫∑c qu√™n n·ªôp ph·∫°t.</li>
          <li>ƒê·∫£m b·∫£o ƒëi·ªÅu ki·ªán ƒëƒÉng ki·ªÉm xe, tr√°nh b·ªã t·ª´ ch·ªëi do vi ph·∫°m ch∆∞a gi·∫£i quy·∫øt.</li>
          <li>N√¢ng cao √Ω th·ª©c ch·∫•p h√†nh lu·∫≠t giao th√¥ng, h∆∞·ªõng ƒë·∫øn tr·∫£i nghi·ªám l√°i xe an to√†n v√† vƒÉn minh.</li>
        </ul>
      </div>

      <div class="recommendation-section">
        <h4>L√Ω do n√™n th∆∞·ªùng xuy√™n tra c·ª©u ph·∫°t ngu·ªôi</h4>
        <ol>
          <li><strong>Ki·ªÉm so√°t k·ªãp th·ªùi c√°c h√†nh vi vi ph·∫°m:</strong> Th√¥ng qua h·ªá th·ªëng, ng∆∞·ªùi ƒëi·ªÅu khi·ªÉn ph∆∞∆°ng ti·ªán d·ªÖ d√†ng theo d√µi, 
            ki·ªÉm so√°t c√°c l·ªói vi ph·∫°m nh∆∞ v∆∞·ª£t ƒë√®n ƒë·ªè, ƒëi sai l√†n ƒë∆∞·ªùng, vi ph·∫°m t·ªëc ƒë·ªô,... t·ª´ ƒë√≥ ch·ªß ƒë·ªông x·ª≠ l√Ω, n·ªôp ph·∫°t theo ƒë√∫ng quy ƒë·ªãnh.</li>
          <li><strong>ƒê·∫£m b·∫£o ƒëi·ªÅu ki·ªán ƒëƒÉng ki·ªÉm xe:</strong> Theo Th√¥ng t∆∞ 16/2021/TT-BGTVT, ph∆∞∆°ng ti·ªán c√≥ vi ph·∫°m ch∆∞a x·ª≠ l√Ω s·∫Ω b·ªã t·ª´ ch·ªëi 
            ƒëƒÉng ki·ªÉm. Vi·ªác tra c·ª©u ph·∫°t ngu·ªôi gi√∫p ch·ªß xe k·ªãp th·ªùi ho√†n t·∫•t nghƒ©a v·ª• ph√°p l√Ω, tr√°nh gi√°n ƒëo·∫°n trong qu√° tr√¨nh ƒëƒÉng ki·ªÉm ƒë·ªãnh k·ª≥.</li>
          <li><strong>G√≥p ph·∫ßn n√¢ng cao √Ω th·ª©c ch·∫•p h√†nh lu·∫≠t giao th√¥ng:</strong> Vi·ªác ch·ªß ƒë·ªông ki·ªÉm tra v√† theo d√µi th√¥ng tin vi ph·∫°m gi√∫p n√¢ng cao 
            nh·∫≠n th·ª©c ph√°p lu·∫≠t, ƒë·ªìng th·ªùi gi·∫£m thi·ªÉu r·ªßi ro tai n·∫°n v√† ƒë·∫£m b·∫£o an to√†n giao th√¥ng cho b·∫£n th√¢n v√† c·ªông ƒë·ªìng.</li>
        </ol>
      </div>

      <p class="note">
        üëâ Tr·∫£i nghi·ªám ti·ªán √≠ch tra c·ª©u ph·∫°t ngu·ªôi ngay tr√™n Carpla.vn
      </p>
    </div>
  </div>
</div>
<app-footer></app-footer>